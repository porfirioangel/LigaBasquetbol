<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD iBatis Mapper 3.0 //EN"
        "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<mapper namespace="com.porfirioads.persistenciamybatis2.persistencia.modelos">
    <select id="allEntrenador" resultMap="resultMapEntrenador">
        SELECT t.id, t.nombre, t.ap_paterno, t.ap_materno, t.telefono,
        t.fecha_nacimiento, t.url_foto, e.id as equipo_id, e.nombre as
        nombre_equipo, e.url_logo FROM entrenador t LEFT JOIN equipo e ON
        t.equipo_id = e.id;
    </select>

    <insert id="insertEntrenador" parameterType="Entrenador">
        INSERT INTO entrenador (nombre, ap_paterno, ap_materno, telefono,
        fecha_nacimiento, url_foto, equipo_id) VALUES (#{nombre}, #{apPaterno},
        #{apMaterno}, #{telefono}, #{fechaNacimiento}, #{urlFoto},
        #{equipo.id});
    </insert>

    <update id="updateEntrenador" parameterType="Entrenador">
        UPDATE entrenador SET nombre=#{nombre}, ap_paterno=#{apPaterno},
        ap_materno=#{apMaterno}, telefono=#{telefono},
        fecha_nacimiento=#{fechaNacimiento}, url_foto=#{urlFoto},
        equipo_id=#{equipo.id} WHERE id=#{id};
    </update>

    <delete id="deleteEntrenador">
        DELETE FROM entrenador WHERE id=#{id}
    </delete>

    <resultMap type="Entrenador" id="resultMapEntrenador">
        <id property="id" column="id"/>
        <result property="nombre" column="nombre"/>
        <result property="apPaterno" column="ap_paterno"/>
        <result property="apMaterno" column="ap_materno"/>
        <result property="telefono" column="telefono"/>
        <result property="fechaNacimiento" column="fecha_nacimiento"/>
        <result property="urlFoto" column="url_foto"/>
        <association property="equipo" javaType="Equipo">
            <id property="id" column="equipo_id"/>
            <result property="nombre" column="nombre_equipo"/>
            <result property="urlLogo" column="url_logo"/>
        </association>
    </resultMap>
</mapper>